# KeePass入门教程

## 下载

- 软件包[下载页面](https://keepass.info/download.html)
- 汉化包[下载页面](https://keepass.info/translations.html)
- 记录搜索插件[下载页面](https://keepass.info/plugins.html#atsearch)

或者直接使用本仓库的包(我是从官网下载的，但是你不应该信任网上的任何非官方包)。

- KeePass-2.49-Setup.exe，安装程序
- Chinese_Simplified.lngx，中文汉化包
- AutoTypeSearch.plgx，记录搜索插件

## 安装

### 安装软件包

直接双击安装软件包即可。

### 安装汉化包

安装完毕后，打开软件，点击菜单View->Change Language，然后点击下面的Open Folder，将汉化包复制进去。然后重新从菜单打开这个对话框，这次选择Chinese语言包，并选择Yes，等待软件重启后就可以看到已经汉化了。

### 安装插件

点击工具菜单->插件管理器，点击下面的打开文件夹按钮，将插件文件复制进去。重新打开软件即可看到插件已经生效，每次安装插件都需要重启软件。

## 初始化

### 新建数据库

点击文件->新建来新建一个数据库，这里要为数据库创建一个主密码，主密码将会在每次软件启动的时候要求输入。数据库中将会保存所有密码，所以需要好好备份数据库。这里可以直接取巧将数据库位置设置在OneDrive或者坚果云等软件的同步文件夹中。

### 加密算法

在新弹出的数据库配置对话框的安全选项卡中可以指定数据库的加密算法，加密算法越复杂数据就越安全，但是同样加密和解密所需时间就越长。这里列出的几种加密算法都很安全，可以自己选用。

如果不知道如何调整参数，可以点击下面的”一秒延迟“按钮，这样会自动调整参数让解密时间大约为1秒，在大多数情况下都可以胜任。或者你也可以自己往大调整，但是记得调整完毕之后点击测试按钮看看解密所需时间多长，不要不小心搞出一个天文数字。

以后如果想要修改的话，也可以通过文件菜单中的“数据库设置”和“更改密钥”来修改以上设置，注意对数据库的任何操作都需要保存才能生效。

## 添加账号

### 添加记录

在软件左边会显示出记录的分类，方便我们对记录进行分组。选择好一个分类之后就可以点击”添加记录“按钮来添加一个记录。

在添加记录对话框中，有几个地方需要注意：

- 标题，也就是软件标题栏里面的文字，KeePass会使用标题来匹配合适的记录
- 用户名
- 密码
- 网址，桌面软件一般不需要这个。而浏览器自动输入密码我觉得使用lastpass等扩展可能更方便

在自动输入选项卡中还可以看到一项名为“双通道自动混淆”的选项，启用该选项后在自动输入的时候会将自动输入的数据随机打乱，然后同时使用键盘和剪贴板方式混合输入。这样的话单一的键盘或者剪贴板监控程序都无法获取密码，极大提高了安全性。但是因为某些软件不支持剪贴板操作，所以这时候该功能会失效。

### 对不同的软件使用相同的账号

有时候需要用同一个账号登录某个系列的几个不同软件，这时候分别创建多个记录就不太合适，因为将来假如修改的时候无法同步更改密码。KeePass也提供了这种情况的解决方案。

在你想要复制的记录上右击选择“重制记录”，然后在重制选项中选中“以引用方式替换账号和密码”，这样复制出来的记录就会继承之前的账号密码，在前者修改的时候会一并修改。这样我们只需要将标题修改为要匹配的软件即可。

## 自动输入

配置完毕之后，打开要自动输入的软件，点击用户名一栏，然后按自动输入快捷键“Ctrl+Alt+A”即可开启自动输入。当然有时候也会出现问题，所以我们来一项一项讨论。

### 自动输入配置

右键点击主界面分组列表上父级KeePass分组，选择编辑群组，在展开的对话框中选择自动输入标签，点击替代默认规则，再点击右边的配置击键序列按钮，就可以自定义输入序列了。默认情况下其他记录都会继承父级的自动输入配置，所以只需要修改这里的项目就可以同步应用到所有记录上。

这里我使用的是`+{DELAY 100}{CLEARFIELD}{USERNAME}{TAB}{PASSWORD}`，含义是先按Shift键切换到英文输入法，等待100毫秒，清空账户框中的数据，输入用户名，按TAB按钮切换到密码框，输入密码。所以使用该项配置的时候，在输入用户名的时候需要切换成中文输入法。如果你经常遇到中英文切换问题，而且使用Win10系统的话，也可以直接添加一个纯的英文输入键盘，这样就不会出现Shift改变中英文的尴尬操作了。

也有人喜欢在末尾再加上`{ENTER}`，在输入密码完毕后按回车自动登录，但是我觉得这个太快了就去掉了。如果喜欢的话也可以再加上。这个对话框中也列出了所有占位符，如果有需要的话也可以根据自己的需求调整。

### 手动输入

需要的时候也可以直接复制记录里面的数据，选中一条记录，默认按`Ctrl+B`时复制用户名，`Ctrl+C`是复制密码。你也可以在设定中设置剪贴板的清除时间，保护数据不被非法盗用，一般情况下15秒足以。

### 自动输入失败

一般情况下输入失败都是没有匹配到记录的缘故，**但是假如目标程序是用管理员权限启动的话，KeePass是无法自动输入的，这种情况下要自动输入，你需要关闭KeePass并也使用管理员权限启动**。

## 软件配置

点击工具菜单->选项可以打开软件配置，这里有很多选项可以调整。下面简单说明一下。

### 安全选项卡

最下面有一项“在安全桌面输入管理密钥”，可以更好的保护管理密钥不被泄露。在安全桌面中，键盘监控程序无法工作，很大程度上防止了木马软件。如果你打开安全桌面出现问题，记得把这个选项关掉。

### 外观选项卡

这里你可以启用一些选项来调整KeePass主窗口的行为。我喜欢开启以下几个选项：

- 最小化到系统托盘
- 打开一个数据库后最小化窗口
- 关闭按钮最小化窗口而不是退出程序

配合开机启动使用更加流畅。

### 集成选项卡

在这里你可以设置KeePass的快捷键等，还可以设置让KeePass开机启动。

### 高级选项卡

这里有几项关于自动输入的设置最好设置一下：

- 若其标题包含在目标窗口标题中，记录将被匹配
- 若一条记录的其中一个标记包含在目标窗口标题中， 记录将被匹配
- 总是显示全局自动输入记录选取对话框

全局自动输入记录选取对话框非常有用，有时候自动输入失败，你不知道是窗口没匹配到还是匹配到了记录却无法输入，通过对话框你就可以知道是因为哪种情况。不过假如你需要输入全屏程序(如游戏)，那么这时候这个选项就不太好用了。

## 插件

### 插件安装

按照前面的说明进行安装。

### 自动搜索插件

这个插件可以全局搜索自动输入记录，在默认匹配不到的时候非常好用。

使用之前先打开软件配置，可以看到在多了一项AutoTypeSearch的配置。这里我喜欢关闭“Show automatically if global auto-type finds no match”，同时开启“Show when system-wide hot key ke pressed”，并设置一个快捷键例如`Ctrl+Q`。

当自动输入匹配不到记录的时候，按该快捷键就会弹出一个全局的搜索框，在这里就可以搜索要自动输入的内容，然后右键点击即可选择自动输入。

KeePass还有大量插件生态可供使用，不过因为我看了一下很多插件都蛮久不更新了。所以这里就不介绍其他插件了，大家可以自行研究。我个人是不推荐安装太多插件的，因为作为密码管理器，插件越多，其实对安全性也会有影响，尽量还是少装插件。

## 参考资料

本文很大程度上收到了[这篇知乎文章](https://zhuanlan.zhihu.com/p/39645975)的启发，这里也介绍了很多KeePass的技巧和知识，大家也可以移步去看看。
